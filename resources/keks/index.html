<html>
    <head>
        <link href="keks.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
    <script>
     var vid = document.getElementById("Loading");
     vid.volume = 0.2
    </script>    
        <div class="backdrop"></div>
        <div class="logo"></div>
        <div class="content">
            <div class="top">
                <h2>Gama Teste</h2>
            </div>

            <div class="letni">
                <h2>Carregando...</h2>
                <h3></h3>
                <div class="loadbar"><div class="thingy"></div></div>
                <p></p>
            </div>
            <div class="bottom">
                <div id="gradient">
                </div>
            </div>
        </div>

<script type="text/javascript">
// this will actually restart the loading bar a lot, making multiple loading bars is an exercise to the reader... for now.
// for a set of possible events, see https://github.com/citizenfx/cfx-client/blob/up-master/components/loading-screens-five/src/LoadingScreens.cpp
var count = 0;
var thisCount = 0;

const emoji = {
    INIT_BEFORE_MAP_LOADED: [ 'üçâ' ],
    INIT_AFTER_MAP_LOADED: [ 'üçã', 'üçä' ],
    INIT_SESSION: [ 'üçê', 'üçÖ', 'üçÜ' ],
};

var current = 0;
const backgrounds = ['loadscreen.jpg', 'loadscreen2.jpg'];

function set_image_background(){
    console.log("asd asd asdas");
    if ( backgrounds.length == current ){
        current = 0;
    }

    var image = backgrounds[current];
    console.log(current);
    console.log(image);
    var elements = document.getElementsByClassName("backdrop");
    var tag = elements[0];

    tag.style.backgroundImage = 'url("' + image + '")';

    current++;
    setTimeout(set_image_background, 5000);
}

setTimeout(set_image_background, 5000);

const handlers = {
    startInitFunctionOrder(data)
    {
        count = data.count;

       // document.querySelector('.letni h3').innerHTML += emoji[data.type][data.order - 1] || '';
    },

    initFunctionInvoking(data)
    {
        document.querySelector('.thingy').style.left = '0%';
        document.querySelector('.thingy').style.width = ((data.idx / count) * 100) + '%';
    },

    startDataFileEntries(data)
    {
        count = data.count;

        document.querySelector('.letni h3').innerHTML += "\u{1f358}";
    },

    performMapLoadFunction(data)
    {
        ++thisCount;

        document.querySelector('.thingy').style.left = '0%';
        document.querySelector('.thingy').style.width = ((thisCount / count) * 100) + '%';
    },

    onLogLine(data)
    {
        document.querySelector('.letni p').innerHTML = data.message + "..!";
    }
};

window.addEventListener('message', function(e)
{
    (handlers[e.data.eventName] || function() {})(e.data);
});
</script>
    </body>
</html>
